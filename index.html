<!DOCTYPE html>
<!-- _includes/base.html -->




<html>
  	<head>
      <title>The blog of Dolf Andringa, striving to be all I can be.</title>
  		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
      
      
        <meta name="keywords" content="Dolf-Andringa,blog" />
      
  		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
  		<script src="/js/jquery.min.js"></script>
  		<script src="/js/jquery.poptrox.min.js"></script>
  		<script src="/js/skel.min.js"></script>
  		<script src="/js/init.js"></script>
      <link href="/jesl/jesl.min.css" rel="stylesheet" media="screen" type="text/css">
      <script src="/jesl/jesl.min.js"> </script>
  	  <link rel="stylesheet" href="/css/syntax.css" />
  		<noscript>
  			<link rel="stylesheet" href="/css/skel.css" />
  			<link rel="stylesheet" href="/css/style.css" />
  			<link rel="stylesheet" href="/css/style-xlarge.css" />
  		</noscript>
  		<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
  	</head>

	<body id="top">
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1545300899113871";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
      <header id="header">
          <a href="/aboutme.html" class="image avatar"><img src="/images/avatar.jpg" alt="Dolf Andringa" /></a>
          <h1><strong>I am <a href="/aboutme">Dolf Andringa</a></strong>, an ecologist, geek and software developer.
            This site contains my personal ramblings.</h1>
      </header>
      <!-- Main -->
        <nav>
          <ul>
              <li><a href="/">Home</a></li>
              <li><a href="/projects.html">Projects</a></li>
              <li><a href="/aboutme.html">About Me</a></li>
              <li><a href="/archive/">Archive</a></li>
          </ul>
        </nav>
      <div id="main">


            <section class="first">
        
        
            <header class="major">
                <h2>Reverse Engineering a Cypress USB to Serial USB driver</h2>
                <p class="post-meta">
                  Jan 28, 2017
                  
                  
                  <span class="tags">
                    Tags:  <a href="/tag/usb">usb</a>  <a href="/tag/reverse_engineering">reverse_engineering</a>  <a href="/tag/python">python</a>  <a href="/tag/usbip">usbip</a>  <a href="/tag/cypress">cypress</a>  <a href="/tag/driver">driver</a>  <a href="/tag/solar">solar</a> 
                  </span>
                </p>
            </header>

            <section>
                <p>The last few weeks I have been busy on a solar monitoring project. I have a minimal viable product working based on an RS232 enabled inverter I have here. The first client I wanted to deploy it with has a similar inverter from the same company, just with a usb port instead of RS232. I was expecting it to be a serial over USB port that would just work as-is with a usb to serial driver, especially because it advertises itself as a Cypress USB to Serial device when you attach it to your computer. Unfortunately this wasn’t true, requiring me to reverse-engineer the USB communication for it. In the end this was easier than I thought it would be and it was a whole lot of fun. This post just shares the quest I went through.</p>


            </section>
            <footer>
              <ul class="actions">
                <li><a href="/blog/2017/01/28/reverse-engineering-cypress-serial-usb.html" class="button">Read More</a></li>
              </ul>
            </footer>

        
    </section>
    <section>
        <div class="row">
            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2017/01/16/drawing-images-and-changing-text-on-a-canvas-with-angular.html">Drawing images and interactively change text on a canvas using Angular JS.</a></h2>
                    </header>
                    <section>
                        <p>So I love <a href="https://angularjs.org/">AngularJS</a> (or Angular as <a href="https://www.infoq.com/news/2016/12/angular-4">you’re supposed to call it now</a>) for creating the interfaces of web-applications. I have really started to decouple the interfaces I make from the backend, by using Angular for the front-end and <a href="http://flask.pocoo.org">flask</a> to create a RESTful backend with which Angular communicates. It’s awesome. Right now I am making a web-interface that draws an image and dynamically changes numbers in that image depending on data it fetches from the backend. It is used in this case to show an image of a Solar Power system and dynamically change numbers in the image, showing the current state (battery capacity, panel output, power consumption, etc) of their system. I am using Angular for this and the <a href="http://www.w3schools.com/html/html5_canvas.asp">HTML5 Canvas</a> object.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2017/01/16/drawing-images-and-changing-text-on-a-canvas-with-angular.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2017/01/15/python-dummy-serial-port.html">Creating dummy serial ports in pure python.</a></h2>
                    </header>
                    <section>
                        <p>Recently I needed to reverse-engineer the serial communication between a solar inverter and a computer. Although hardware manufactures may often be good at making the hardware they sell, their accompanying software often leaves a lot to be desired. To develop my own software, I needed to interface with a specific inverter, both to intercept the serial communication at first, but later to write my own software. In order to be able to write unittests for the serial port, and to test my software without actually being connected to an inverter, I wanted to have a dummy serial port on my computer that listens for any connections to the port and responds whatever I tell it to.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2017/01/15/python-dummy-serial-port.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/11/01/nrf24l01-beaglebone-black.html">NRF24L01 and SPIDEV on the Beagle Bone Black</a></h2>
                    </header>
                    <section>
                        <p>I am working on various electronics projects where I want to have a sensor node that collects data from a sensor and either logs it to a micro-SD-card directly or sens it wirelessly to another machine that uses/logs/etc the data. I opted for a set of <a href="http://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01">NRF24L01+</a> boards for the wireless communication between the nodes and data loggers. So to test it out I want to communicate between my <a href="http://www.nordicsemi.com/eng/Products/2.4GHz-RF/nRF24L01">Beagle Bone Black</a> and an <a href="https://www.arduino.cc/">Arduino</a>. The <a href="https://www.arduino.cc/">NRF24 library by TMRh20</a> supplies a unified API for the NRF24L01 that should work on Arduino, linux (like Beagle Bone Black and Raspberry Pi) and other platforms. It also includes some examples that are identical across platforms so you can test between platforms with the same code. Really cool. I had trouble getting it to work on my Beagle Bone Black. This post hopefully will help other getting it to work on a Beagle Bone Black running Debian Jessy.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/11/01/nrf24l01-beaglebone-black.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/10/26/business-intelligence-with-knime.html">Business intelligence and data manipulation with Knime</a></h2>
                    </header>
                    <section>
                        <p>It’s been a while since I did a proper post about something techy. But I did spend quite a bit of time with Knime, and I love it. So I think it warrants a post. <a href="https://www.knime.org/knime-analytics-platform">Knime</a> is a complete data mining, manipulation and analysis toolkit. It’s completely open-source and really flexible. I have experience with other <a href="https://en.wikipedia.org/wiki/Extract,_transform,_load">ETL</a> and reporting tools, like <a href="https://www.talend.com/products/talend-open-studio">Talend Open Studio</a>, <a href="http://community.jaspersoft.com/project/jaspersoft-studio">JasperReports</a> and <a href="http://www.pentaho.com/product/data-integration">Pentaho Kettle</a> but for me (in my use-case) Knime rises above them. Talking about my use case, what is it?</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/10/26/business-intelligence-with-knime.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/09/13/tragedy-in-the-amazon.html">Tragedy in the Amazon</a></h2>
                    </header>
                    <section>
                        <p><a href="https://www.change.org/p/president-of-bolivia-evo-morales-let-s-protect-the-madidi-national-park-and-amazon-forest?recruiter=596205683"><img src="/images/beni_dam_banner.jpg" alt="Help save Madidi and Pilón Lajas" /></a>
The Tambopata-Madidi area on the foothills of the Andes is one if the last areas of Amazonian forest that is relatively untouched by man. It contains 42000km2 of national parks, ranging from Tambopata in Peru to Madidi and Pilón Lajas in Bolivia. It is home to two important tributaries of the Amazon river and an incredible biodiversity with both montane and lowland tropical forest, harbouring over 10% of the world’s bird species, and possibly the most biodiverse place in the world. Around 15000-30000 people divided among three different indigenous peoples call it their home, with an interesting cultural diversity, bridging the Highland people for which Peru and Bolivia are famous to the lowland Amazonian tribes.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/09/13/tragedy-in-the-amazon.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/project/2016/06/28/beaglebone_logic_level_analyser.html">My Beagle Bone Black Logic-level analyser in  a web-application</a></h2>
                    </header>
                    <section>
                        <p>For my <a href="/tag/aquaponics/">aquaponics project</a> I need to create a timed switch that turns my pump on and off. I am doing this with a simple 555 timer in a-stable mode, a capacitor, a relais and two pot-meters. The timer in a-stable mode switches a pin between high and low state, for a fixed amount of time. Both the high and the low times can be adjusted with the potentiometers.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/project/2016/06/28/beaglebone_logic_level_analyser.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/06/09/arch-reinstalling-kernel-after-failed-upgrade.html">Reinstalling the kernel on Arch Linux after a failed upgrade.</a></h2>
                    </header>
                    <section>
                        <p>Since a few weeks my laptop battery is dead. I am still trying to work with Asus to get a new one as it is still under warranty (but sending it in for repair will apparently take 2 months while I already know that a new battery will solve the problem). So I am working of the net power only. The power sockets in the Philippines aren’t great though, and Asus decided to integrate the plug into the transformer/regulator unit for my laptop charger, creating a big heavy plug that is really too heavy for vertical wall sockets. So as you can guess from the title of this blog post, yesterday I was working on my laptop and decided to install upgrades on my Arch Linux box. While I was doing this though, I accidentally touched the power cord of my laptop, which then fell out of the wall socket. This isn’t the first time this happened, but unfortunately my computer was in the middle of a kernel upgrade…. And of course the kernel modules weren’t fully installed, and the initramfs wasn’t fully updated either.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/06/09/arch-reinstalling-kernel-after-failed-upgrade.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/05/13/finding-chinese-ip-cam.html">Setting up a chinese IP camera without manual</a></h2>
                    </header>
                    <section>
                        <p>This post is probably a no-brainer for quite a lot of people. And it should have been for me too. I don’t know if my brain was just not working from the dry and hot el niño weather, but it took me quite a while to figure this out. Since chances are there are others with the same problem, I thought it’d be worth to write it up.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/05/13/finding-chinese-ip-cam.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/04/29/gorgeous-earth.html">Gorgeous earth art</a></h2>
                    </header>
                    <section>
                        <p>The USGS isn’t just a scientific organisation doing a lot of satellite imagery and remote sensing work. They show themselves to be artists as well. These images are absolutely gorgeous. Earth itself is gorgeous and there are many ways of looking at it. The way the USGS Landsat team are looking at it is definitely way out there. The way I use the same images to try to look underwater is a bit more mundane unfortunately.
These are just some of the images. You can <a href="http://eros.usgs.gov/imagegallery/earth-art-4">see more on the USGS website</a>.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/04/29/gorgeous-earth.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/project/2016/04/24/AquaponicsModeler.html">Aquaponics Modeler: a modeling application for Aquaponics systems.</a></h2>
                    </header>
                    <section>
                        <p>Little by little I am working at my current job on an <a href="http://www.theaquaponicsource.com/what-is-aquaponics/">Aquaponics system</a> together with the help of our volunteers.
As a final step to the first implementation I need to regulate the flow of water from our fish tank to the grow bed. I decided to do this with a timer that switches the pump on and off. In order to create the electronics for this timer, I need to know accurately how much water is flowing from one compartment into the next.
Of course I could just have done the maths for this on the back of a napkin, but I though writing an application that does the simulation would be much more fun.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/project/2016/04/24/AquaponicsModeler.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/02/20/pulseaudio-mpd-archlinux.html">Problems getting MPD, PulseAudio and Arch Linux to work together</a></h2>
                    </header>
                    <section>
                        <p>I love Gnome Music Player Client (gmpc) as an audio player, with MPD (Music Player Daemon) as a backend. Both because of the remote control possibilities but GMPC is also just a great client. But when installing MPD, combined with PulseAudio on my Arch Linux laptop, I ran into trouble. MPD runs as a different user, and as that user wasn’t able to connect to PulseAudio that runs under my regular desktop user.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/02/20/pulseaudio-mpd-archlinux.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/02/07/rmarkdown_loops_and_knitr.html">Outputting HTML or PDF results in a loop with R, RMarkdown and Knitr</a></h2>
                    </header>
                    <section>
                        <p>Recently I have been analyzing a large amount of data with <a href="https://www.r-project.org/">R</a>. A great tool to do this is <a href="https://www.rstudio.com">Rstudio</a>. It is an IDE for R that makes it easy to write your R code, explore the data and show the graphs. But if you want to communicate your results with others, sitting behind an IDE isn’t the best way. Fortunately Rstudio integrates with Knitr, RMarkdown and Pandoc. With those tools you can create PDF, HTML or word files from your R code.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/02/07/rmarkdown_loops_and_knitr.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/02/04/creating_custom_persistent_arch_live_iso.html">Creating a custom persistent Arch Linux live cd for UEFI and BIOS systems</a></h2>
                    </header>
                    <section>
                        <p>I am running Arch Linux for a while now and am quite happy with it. Even though it is not the easiest n00b distro, in the end the documentation is so good that if you’re new to Linux, you can probably find out how to do most stuff if you’re inquisitive. One thing I had trouble with though, is getting a custom Live CD that could boot from my USB drive, has a persistence layer so changes are saved when booting, and booted both from UEFI only systems (my laptop) and preferably also BIOS only systems. It took me a while to figure this out, but I got it in the end. So I’ll document it for posterity.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/02/04/creating_custom_persistent_arch_live_iso.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/01/21/my-favorite-tools.html">My favorite web development tools.</a></h2>
                    </header>
                    <section>
                        <p>For this post I want to share some of my favorite web-application development tools. When I started thinking about this though, I realized there were so many, and which I use depends so much on what it is that I am trying to do, that I decided to take maybe a somewhat strange approach to this. I am going to approach it as a comparison on two sets of tools: python web development tools vs php CMS-es.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/01/21/my-favorite-tools.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u 12u(small)">
                    <header>
                        <h2><a href="/project/2016/01/04/Biodata.html">Biodata: a flexible research data entry application</a></h2>
                    </header>
                    <section>
                        <p>Over the years I have wondered why researchers still rely on spreadsheet applications to record their research data. Although most people know how to use them, spreadsheets have very serious drawbacks, especially if multiple people contribute data to the same dataset/project. With spreadsheets it is usually not possible to have multiple people enter data concurrently. It is also hard to check the sanity of entered data unless you start working with complex formulas and macros, which quickly become very complex, error prone and hard to maintain. And lastly, transforming data in a spreadsheet where you combine data from different tabs/tables, transpose data, filter/sort data, group/split data, etc becomes hard and error prone. For these (and more) reasons, (relational) databases with a decent data entry application in front of it are much better suited for research data.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/project/2016/01/04/Biodata.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            

                <article class="6u$ 12u(small)">
                    <header>
                        <h2><a href="/blog/2016/01/03/my-search-for-free-hosting-and-email.html">My search for free website and email hosting</a></h2>
                    </header>
                    <section>
                        <p>Over the years I have (happily) setup and used many different ways of hosting personal and company email and websites from <a href="https://www.zimbra.com/">Zimbra</a>, commercially hosted virtual servers, in-house servers, cheap webhosting companies, servers at home and blogs and websites in <a href="http://www.blogger.com">blogger</a>, <a href="http://www.drupal.com">Drupal</a>, <a href="http://www.wordpress.com">Wordpress</a>, etc. All of them have their merits and drawbacks. But since I moved to the Philippines and started working for <a href="http://www.marineconservationphilippines.org">Marine Conservation Philippines</a> I was looking for something cheap (free?) and low-maintenance to host the email from my old domain name, and host a weblog for personal ramblings. This is what I ended up with.</p>


                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/blog/2016/01/03/my-search-for-free-hosting-and-email.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>

            
        </div>
    </section>

      </div>

        <!-- Footer -->
        <footer id="footer">
            <ul class="icons">
              
              
              <li>
                <a href="https://stackoverflow.com/users/867162" class="icon fa-stack-overflow">
                  <span class="label">GitHub</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://github.com/dolfandringa" class="icon fa-github">
                  <span class="label">GitHub</span>
                </a>
              </li>
              

              

              
              <li>
                <a href="https://linkedin.com/in/dolfandringa" class="icon fa-linkedin">
                  <span class="label">LinkedIn</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://plus.google.com/+dolfandringa" class="icon fa-google-plus">
                  <span class="label">Google+</span>
                </a>
              </li>
              

              

              

              
              <li>
                <a href="mailto:dolfandringa@gmail.com" class="icon fa-envelope-o">
                  <span class="label">Email</span>
                </a>
              </li>
              
            </ul>
            <ul class="copyright">
                <li>&copy; Dolf Andringa 2005</li>
            </ul>
          
            <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-72709986-1', 'auto');
              ga('send', 'pageview');

            </script>

        </footer>

	</body>
</html>
